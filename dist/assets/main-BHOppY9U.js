(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const f of a.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function s(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(t){if(t.ep)return;t.ep=!0;const a=s(t);fetch(t.href,a)}})();const A="https://brflorida.app.n8n.cloud/webhook/legal-analysis-upload",w=100*1024*1024;let r=null,i=new Map,M=0,c,u,E,x,y,L,v,l,m,d;function I(n){if(n===0)return"0 B";const e=1024,s=["B","KB","MB","GB"],o=Math.floor(Math.log(n)/Math.log(e));return parseFloat((n/Math.pow(e,o)).toFixed(1))+" "+s[o]}function b(n,e){n.preventDefault(),e?c.classList.add("dragover"):u.classList.add("dragover")}function z(n,e){n.preventDefault(),e?c.classList.remove("dragover"):u.classList.remove("dragover")}function F(n,e){var o;n.preventDefault(),e?c.classList.remove("dragover"):u.classList.remove("dragover");const s=Array.from(((o=n.dataTransfer)==null?void 0:o.files)||[]);C(s,e)}function B(n,e){const s=n.target,o=Array.from(s.files||[]);C(o,e),s.value=""}function C(n,e){var o;const s=["pdf","docx","doc","txt"];if(e){if(n.length>1){g("‚ö†Ô∏è Please select only one intake form file.","error");return}const t=n[0];if(!t)return;const a=(o=t.name.split(".").pop())==null?void 0:o.toLowerCase();if(!a||!["pdf","docx","doc"].includes(a)){g("‚ö†Ô∏è Please select a PDF or Word document for the intake form.","error");return}r={file:t,name:t.name,size:t.size,type:a},g(`‚úÖ Intake form uploaded: ${t.name}`,"success")}else n.forEach(t=>{var f;const a=(f=t.name.split(".").pop())==null?void 0:f.toLowerCase();if(a&&s.includes(a)){const S="file_"+ ++M;i.set(S,{file:t,name:t.name,size:t.size,type:a})}else console.warn(`Skipped unsupported file: ${t.name}`)});k(),h()}function g(n,e){y.textContent=n,y.className=`requirement-note ${e}`,y.style.display="block"}function k(){if(!(r||i.size>0)){L.style.display="none";return}L.style.display="block";const e=(r?r.size:0)+Array.from(i.values()).reduce((s,o)=>s+o.size,0);if(document.getElementById("intakeCount").textContent=r?"1":"0",document.getElementById("totalFiles").textContent=i.size.toString(),document.getElementById("totalSize").textContent=I(e),e>w*.8?(d.style.display="block",e>w?(d.textContent="‚ùå Total file size exceeds 100MB limit. Please remove some files.",d.classList.add("size-error")):(d.textContent="‚ö†Ô∏è Total file size is approaching the 100MB limit",d.classList.remove("size-error"))):d.style.display="none",v.innerHTML="",r){const s=document.createElement("div");s.className="file-item intake-file",s.innerHTML=`
      <div class="file-name">${r.name}</div>
      <div class="file-type intake">${r.type.toUpperCase()}</div>
      <div class="file-category category-intake">INTAKE FORM</div>
      <div class="file-size">${I(r.size)}</div>
      <button type="button" class="file-remove" onclick="removeIntakeForm()">
        Remove
      </button>
    `,v.appendChild(s)}Array.from(i.entries()).forEach(([s,o])=>{const t=document.createElement("div");t.className="file-item",t.innerHTML=`
      <div class="file-name">${o.name}</div>
      <div class="file-type ${o.type}">${o.type.toUpperCase()}</div>
      <div class="file-category category-case">CASE DOC</div>
      <div class="file-size">${I(o.size)}</div>
      <button type="button" class="file-remove" onclick="removeFile('${s}')">
        Remove
      </button>
    `,v.appendChild(t)})}function $(){r=null,g("‚ö†Ô∏è Please upload a client intake form to proceed.","error"),k(),h()}function D(n){i.delete(n),k(),h()}function P(){r=null,i.clear(),g("‚ö†Ô∏è Please upload a client intake form to proceed.","error"),k(),h()}function h(){const n=(r?r.size:0)+Array.from(i.values()).reduce((t,a)=>t+a.size,0),e=!!r,s=i.size>0,o=n<=w;l.disabled=!e||!s||!o,e?s?o?l.textContent=`üöÄ Generate Analysis (${i.size+1} documents)`:l.textContent="‚ùå File Size Limit Exceeded":l.textContent="‚ö†Ô∏è Upload Case Documents Required":l.textContent="‚ö†Ô∏è Upload Intake Form Required"}async function O(n){if(n.preventDefault(),!r){p("‚ö†Ô∏è Please upload the client intake form.","error");return}if(i.size===0){p("‚ö†Ô∏è Please upload at least one case document.","error");return}const e=new FormData;e.append("clientName",document.getElementById("clientName").value),e.append("caseReference",document.getElementById("caseReference").value),e.append("attorneyName",document.getElementById("attorneyName").value),e.append("intakeForm",r.file);let s=0;i.forEach(o=>{e.append(`caseDocument${s}`,o.file),s++}),p(`üîÑ Analyzing intake form and ${i.size} case documents... This process may take several minutes.`,"processing"),l.disabled=!0,l.textContent="‚è≥ Generating Legal Analysis...";try{const t=await(await fetch(A,{method:"POST",body:e})).json();if(t.status==="success"){if(p(`‚úÖ Legal Analysis Complete! Generated professional findings letter and comprehensive case analysis for ${t.documentsProcessed} documents.`,"success"),t.downloadLinks){const a=`
          <div style="margin-top: 20px; padding: 20px; background: #f0f9ff; border-radius: 8px;">
            <h4 style="color: #1e40af; margin-bottom: 15px;">üì• Download Generated Legal Documents:</h4>
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
              <a href="${t.downloadLinks.findingsLetter}" target="_blank" style="background: #059669; color: white; padding: 12px 20px; text-decoration: none; border-radius: 6px; font-weight: 600;">üìß Professional Findings Letter</a>
              <a href="${t.downloadLinks.caseAnalysis}" target="_blank" style="background: #0284c7; color: white; padding: 12px 20px; text-decoration: none; border-radius: 6px; font-weight: 600;">üìä Detailed Case Analysis</a>
              <a href="${t.downloadLinks.executiveSummary}" target="_blank" style="background: #7c3aed; color: white; padding: 12px 20px; text-decoration: none; border-radius: 6px; font-weight: 600;">üìã Executive Summary</a>
            </div>
          </div>
        `;m.innerHTML+=a}console.log("Legal Analysis Results:",t)}else p(`‚ùå Analysis Failed: ${t.message||"Unknown error occurred during document processing."}`,"error")}catch(o){const t=o instanceof Error?o.message:"Unknown error";p(`‚ùå System Error: ${t}. Please try again or contact technical support.`,"error")}finally{h()}}function p(n,e){m.innerHTML=n,m.className=`status ${e}`,m.style.display="block",m.scrollIntoView({behavior:"smooth",block:"nearest"})}window.removeIntakeForm=$;window.removeFile=D;window.clearAllFiles=P;function N(){if(c=document.getElementById("intakeUploadSection"),u=document.getElementById("documentsUploadSection"),E=document.getElementById("intakeInput"),x=document.getElementById("documentsInput"),y=document.getElementById("intakeStatus"),L=document.getElementById("fileManager"),v=document.getElementById("fileListContainer"),l=document.getElementById("submitBtn"),m=document.getElementById("status"),d=document.getElementById("sizeWarning"),!c||!u||!E||!x||!y||!L||!v||!l||!m||!d){console.error("Required DOM elements not found");return}c.addEventListener("dragover",e=>b(e,!0)),c.addEventListener("dragleave",e=>z(e,!0)),c.addEventListener("drop",e=>F(e,!0)),u.addEventListener("dragover",e=>b(e,!1)),u.addEventListener("dragleave",e=>z(e,!1)),u.addEventListener("drop",e=>F(e,!1)),E.addEventListener("change",e=>B(e,!0)),x.addEventListener("change",e=>B(e,!1));const n=document.getElementById("uploadForm");n&&n.addEventListener("submit",O),g("‚ö†Ô∏è Please upload a client intake form to proceed.","error"),console.log("Legal Document Analysis Portal initialized with enhanced UI")}document.addEventListener("DOMContentLoaded",N);
//# sourceMappingURL=main-BHOppY9U.js.map
